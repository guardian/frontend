@(tag: Tag, trails: Seq[Trail], leadContent: Seq[Trail])
@import fragments._
@import conf._

<!DOCTYPE html>

<html>

<head>

    @fragments.commonJavaScriptSetup(Static)
    @fragments.metaData(tag, conf.Configuration)

    <title>@tag.webTitle</title>

    <link rel="shortcut icon" type="image/png" href="@Static("images/favicon.png")">

    <link rel="stylesheet" media="screen" type="text/css" href="http://2.gu-pasteup.appspot.com/css/pasteup.css" />

    <!-- Add layout styles for browsers over 400px or less than IE9, but not IE mobile or IE6. -->
    <link rel="stylesheet" media="screen and (min-width: 400px)" href="@Static("stylesheets/grid.responsive.css")">

    <link rel="stylesheet" type="text/css" href="@Static("stylesheets/main.css")">

    <!--[if (lt IE 9) & (!IEMobile) & (gt IE6)]>
        <link rel="stylesheet" type="text/css" href="@Static("stylesheets/grid.responsive.css")">
    <![endif]-->

    <script data-main="@Static("javascripts/main.min.js")" src="http://3.gu-pasteup.appspot.com/js/require.js"></script>


</head>

<body>

    <div id="container">

        <div class="line">

            <div class="unit size1of1">
                    @fragments.placeholders("tier1", 5)
                    @fragments.headline(tag.webTitle)

                    <h2>@tag.section</h2>

            </div>
        </div>

        @defining(leadContent.take(2)){ importantStories =>
            @if(importantStories nonEmpty) {
                <div class="line">
                    @importantStories.map{ trail =>
                        <div class="unit size1of2">
                            @fragments.formatTrail(trail)
                        </div>
                    }
                </div>
            }

            <div class="line">
                    @* TODO don't like this deduping would be easier as a case class or something *@
                    @trails.filterNot(s => importantStories.map(_.url).contains(s.url)).map{ trail =>
                        <div class="unit size1of2">
                            @fragments.formatTrail(trail)
                        </div>
                    }
            </div>
        }

    </div>

    <div id="debug">
        <strong>debug info</strong>
        <ul>
            <li>Screen height: <span id="screenHeight"></span></li>
            <li>Screen width: <span id="screenWidth"></span></li>
            <li>Window height: <span id="windowHeight"></span></li>
            <li>Window width: <span id="windowWidth"></span></li>
            <li>Layout mode: <span id="layout"></span></li>
            <li>Connection Speed: <span id="bandwidth"></span></li>
            <li>Battery: <span id="battery"></span></li>
            <li>Pixel Ratio: <span id="pixelratio"></span></li>
            <li>Retina display: <span id="retina"></span></li>
        </ul>
    </div>
    @fragments.analytics(tag, conf.Configuration)
</body>
</html>
