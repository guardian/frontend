@import views.html.fragments.selectDates

<div class="membership-tab js-membership-tab" data-sprite-url="@Static("stylesheets/membership-icons.css")">
    <div class="form__success is-hidden js-membership-change-cc-success">Your card details have been updated</div>

    <div class="membership-tab__subscription-cancel is-hidden js-mem-cancel-tier">
        <h2 class="subscription-change__title">You've cancelled your membership</h2>
        <p>
            Now that you've cancelled your membership, your <span class="js-membership-tier"></span> benefits will
            run out on <strong><span class="js-membership-current-period-end"></span></strong>. After that date, the
            membership section won't be available in your profile.
        </p>
        <p>
            Your final subscription payment was taken on
            <strong><span class="js-membership-current-period-start"></span></strong>. Please note, you won't be able to
            amend your package again until this change has been processed.
        </p>
    </div>

    <div class="membership-tab__subscription-change is-hidden js-mem-change-tier">
        <h2 class="subscription-change__title">You've changed packages</h2>

        <p>
            Now that you've switched packages, your <span class="js-membership-tier"></span> benefits will run out
            on <strong><span class="js-membership-current-period-end"></span></strong>. After that date, you'll
            default to our Friend level of membership. Your final <span class="js-membership-tier"></span>
            subscription payment was taken on <strong><span class="js-membership-current-period-start"></span></strong>.
        </p>
        <p>Please note, you won't be able to amend your package again until this change has been processed.</p>

        <h2 class="change-summary__heading">Change package summary</h2>

        <i class="i i-mem-arrow change-summary__arrow"></i>

        <div class="change-summary__container l-row l-row--items-2">

            <div class="change-summary__panel change-summary__panel--current l-row__item">
                <div class="change-summary__panel-label change-summary__panel-label--current">Your current package</div>
                <div class="change-summary__header">
                    <div class="change-summary__tier-icon">
                        <i class="i js-mem-icon-current"></i>
                    </div>
                    <h3 class="change-summary_tier js-membership-tier"></h3>
                </div>
                <div class="change-summary__meta">
                    <ul class="u-unstyled">
                        <li class="change-summery__item">
                            <span class="change-summary__label">End date</span>
                            <span class="change-summary__data js-membership-current-period-end"></span>
                        </li>
                        <li class="change-summery__item">
                            <span class="change-summary__label"><span class="js-membership-plan-interval"></span> payment</span>
                            <span class="change-summary__data js-membership-payment-cost"></span>
                        </li>
                        <li class="change-summery__item">
                            <span class="change-summary__label">Last payment</span>
                            <span class="change-summary__data js-membership-current-period-start"></span>
                        </li>
                        <li class="change-summery__item">
                            <span class="change-summary__label">Card</span>
                            <span class="change-summary__data">
                                <span class="membership-tab__card-details">
                                    •••• •••• •••• <span class="js-membership-cc-last4"></span>
                                </span>
                            </span>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="change-summary__panel change-summary__panel--target l-row__item">
                <div class="change-summary__panel-label change-summary__panel-label--target">Your new package</div>
                <div class="change-summary__header">
                    <div class="change-summary__tier-icon">
                        <i class="i i-g-friend"></i>
                    </div>
                    <h3 class="change-summary_tier">Friend</h3>
                </div>
                <div class="change-summary__meta">
                    <ul class="u-unstyled">
                        <li class="change-summery__item">
                            <span class="change-summary__label">Start date</span>
                            <span class="change-summary__data js-membership-current-period-end"></span>
                        </li>
                        <li class="change-summery__item">
                            <span class="change-summary__label">Monthly payment</span>
                            <span class="change-summary__data">FREE</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <ul class="u-unstyled membership-tab__details-list js-membership-details-list-upper">
        <li class="is-hidden js-membership-number-container">
            <div class="fieldset__heading">
                <h2 class="form__heading">
                    Membership number
                </h2>
            </div>

            <div class="fieldset__fields">
                <div class="form-field js-membership-number"></div>
            </div>
        </li>
        <li>
            <div class="fieldset__heading">
                <h2 class="form__heading">
                    Membership tier
                </h2>
            </div>

            <div class="fieldset__fields u-cf">
                <div class="form-field">
                    <span class="js-membership-tier" id="qa-membership-tier"></span>
                    <a href="@(conf.Configuration.id.membershipUrl)/tier/change" class="submit-input membership-tab__update-button" data-link-name="Change tier">Change tier</a>
                </div>
            </div>
        </li>
        <li>
            <div class="fieldset__heading">
                <h2 class="form__heading">
                    Start date
                </h2>
            </div>

            <div class="fieldset__fields">
                <div class="form-field">
                    <span class="js-membership-join-date"></span>
                </div>
            </div>
        </li>
        <li>
            <div class="fieldset__heading">
                <h2 class="form__heading">
                    <span class="js-membership-plan-interval"></span> payment
                </h2>
            </div>

            <div class="fieldset__fields">
                <div class="form-field">
                    <span class="membership-payment-cost js-membership-payment-cost"></span>
                </div>
            </div>
        </li>
    </ul>
    <ul class="is-hidden u-unstyled membership-tab__details-list membership-tab__details-list--lower js-membership-details-list-lower">
        <li>
            <div class="fieldset__heading">
                <h2 class="form__heading">
                    Next payment
                </h2>
            </div>

            <div class="fieldset__fields">
                <div class="form-field">
                    <span class="js-membership-current-period-end"></span>
                </div>
            </div>
        </li>
        <li>
            <div class="fieldset__heading">
                <h2 class="form__heading">
                    Card details
                </h2>
            </div>

            <div class="fieldset__fields u-cf">
                <div class="form-field">
                    <span class="js-membership-cc-type membership-tab__card-types"><span class="js-membership-payment-card-text u-h"></span></span>
                    <span class="membership-tab__card-details">
                        •••• •••• •••• <span class="js-membership-cc-last4"></span>
                    </span>
                    <button class="submit-input js-membership-change-cc-open membership-tab__update-button" data-link-name="Change card">Change card</button>
                </div>
            </div>
        </li>
        <li class="membership-tab__change-cc-form is-closed js-membership-change-cc-form-cont">
            <form class="js-membership-change-cc-form js-stripe-form" action="">

                <div class="js-payment-errors qa-form-error form__error is-hidden"></div>

                <div class="fieldset__heading">
                    <h2 class="form__heading">
                        Change card details
                    </h2>
                </div>
                <div class="fieldset__fields">
                    <div class="form-field">
                        <label class="label" for="cc-num">Card Number </label>
                        <div class="input membership-tab__credit-card-container">
                            <i class="js-credit-card-image membership-tab__card-types--in-field"></i>
                            <input type="tel" size="20" data-stripe="number" class="js-credit-card-number text-input" id="cc-num" placeholder="xxxx xxxx xxxx xxxx" maxlength="19" autocomplete="off"/>
                        </div>
                    </div>

                    <div class="form-field">
                        <label class="label" for="cc-cvc"></label>
                        <span>Security code</span>
                        <input type="tel" size="4" data-stripe="cvc" class="js-credit-card-cvc text-input text-input--small text-input--block" id="cc-cvc" placeholder="CVC" maxlength="4" autocomplete="off"/>

                    </div>

                    <div class="form-field">
                        <label class="label" for="cc-exp-month"></label>
                        <span>Expiry</span>
                        <p>
                            <select data-stripe="exp-month" id="cc-exp-month" class="js-credit-card-exp-month">
                                <option selected="selected">Month</option>
                                @for(month <- selectDates.validCardMonths){
                                <option value="@month">@month</option>
                                }
                            </select>
                            <span> / </span>
                            <select data-stripe="exp-year" id="cc-exp-year" class="js-credit-card-exp-year">
                                <option selected="selected">Year</option>
                                @for((year, formattedYear) <- selectDates.validCardYears){
                                <option value="@year">@formattedYear</option>
                                }
                            </select>
                        </p>
                    </div>
                    <div class="form-field">
                        <button class="submit-input js-membership-change-cc-submit" type="submit" data-link-name="Update card details">Update</button><div class="is-updating js-updating"></div>
                    </div>
                </div>
            </form>
        </li>
    </ul>
</div>
