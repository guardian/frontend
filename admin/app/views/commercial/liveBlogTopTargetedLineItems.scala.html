@import common.dfp.LiveBlogTopTargetingReport
@import tools.{CapiLink, SiteLink, DfpLink}

@(report: LiveBlogTopTargetingReport)(implicit request: RequestHeader, context: model.ApplicationContext)

@admin_main("Commercial 'liveblog-top' Slot", isAuthed = true, hasCharts = false) {

    <link rel="stylesheet" type="text/css" href="@controllers.admin.routes.UncachedAssets.at(" css/commercial.css")">

    <h1>LiveBlog Top Slot</h1>

    <p>Last updated: @if(report.updatedTimeStamp) { @{report.updatedTimeStamp} } else { never }</p>

    <p>Pages will show a liveblog top slot if you set up a LineItem in DFP with the following parameters:</p>
    <ol>
        <li>Is a Sponsorship</li>
        <li>Targets the <em>liveblog-top</em> slot</li>
        <li>Targets the <em>sport</em> or <em>culture</em> section</li>
        <li>Targets the <em>liveblog</em> content type</li>
        <li>Targets the <em>mobile</em> breakpoint</li>
    </ol>

    <h2>Line Items</h2>
    <p>Line items that match the above targeting:</p>
    @if(report.lineItems.items.isEmpty) {<p>None</p>} else {
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th class="col-md-3">Name</th>
                    <th class="col-md-1">DFP link</th>
                </tr>
            </thead>
            <tbody>
                @for(lineItem <- report.lineItems.sortedItems) {
                    <tr>
                        <td>@{lineItem.name}</td>
                        <td><a href="@DfpLink.lineItem(lineItem.id)">@{lineItem.id}</a></td>
                    </tr>
                }
            </tbody>
        </table>
    }
}
