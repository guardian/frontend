@(env: String, report: common.dfp.HighMerchandisingTargetedTagsReport)(implicit request: RequestHeader)
@import tools.DfpLink

@admin_main("Commercial High Slot", env, isAuthed = true, hasCharts = false) {

    <link rel="stylesheet" type="text/css" href="@controllers.admin.routes.UncachedAssets.at(" css/commercial.css")">

    <h1>High Merchandising Line Items</h1>

    <em style="float: right">Last updated: @report.updatedTimeStamp</em>

    @if(report.lineItems.items.isEmpty) {<p>None</p>} else {
        <table class="table table-striped table-bordered table-condensed">
            <thead>
                <tr>
                    <th>Line Item Name</th>
                    <th>DFP link</th>
                    <th>Keywords</th>
                    <th>adUnits</th>
                    <th>DFP adUnit Links</th>
                    <th>Editions Targets</th>
                </tr>
            </thead>
            <tbody>
                @for(lineItem <- report.lineItems.sortedItems) {
                    <tr>
                        <td>@{lineItem.name}</td>
                        <td><a href="@DfpLink.lineItem(lineItem.id)">@{lineItem.id}</a></td>
                        <td>@{lineItem.tags.mkString(", ")}</td>
                        <td>@{lineItem.adUnitString.mkString(", ")}</td>
                        <td>@for(adUnitId <- lineItem.adUnitIds) {
                            <a href="@DfpLink.adUnit(adUnitId)">@{adUnitId}</a>
                        }</td>
                        @if(lineItem.editions.isEmpty){
                        <td>non</td>} else {
                        <td>@{lineItem.editions.distinct}</td>}
                    </tr>
                }
            </tbody>
        </table>
    }

}
