@(front: model.FaciaPage, block: (com.gu.facia.client.models.CollectionConfig, model.Collection), collectionsSize: Int = 1, index: Int = 1, dataId: String)(implicit request: RequestHeader, templateDeduping: views.support.TemplateDeduping)

@import layout.ContainerLayout
@import views.support._
@import views.html.fragments.containers
@import slices.{FixedContainers, DynamicContainers}

@* This nastiness will go once everything moves to the new Facia Cards pattern *@

@defining(block){ case (config, collection) =>
    @config.collectionType match {
        case Some("news")                       => { @containers.news(front, collection, NewsContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("news/auto")                  => { @containers.news(front, ForceGroupsCollection.firstTwoBig(collection), NewsContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("news/headline")              => { @containers.headline(collection, HeadlineContainer(), index, dataId)(request, config) }
        case Some("news/most-popular")          => { @containers.popular(collection, PopularContainer(), index, dataId)(request, config) }
        case Some("nav/list")                   => { @containers.navlist(collection, index, dataId)(request, config) }
        case Some("news/people")                => { @containers.people(collection, PeopleContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("news/small-list")            => { @containers.small_list(collection, SpecialContainer(), index, dataId)(request, config) }
        case Some("news/special")               => { @containers.special(collection, SpecialContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("features")                   => { @containers.features(collection, FeaturesContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("features/auto")              => { @containers.featuresauto(collection, FeaturesAutoContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("features/multimedia")        => { @containers.multimedia(collection, MultimediaContainer(), index, useInlinePlayer = true, dataId = dataId)(request, templateDeduping, config) }
        case Some("features/picks")             => { @containers.picks(collection, PicksContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("features/volumes")           => { @containers.featuresvolumes(front, collection, FeaturesVolumesContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("prototype/cassoulet")        => { @containers.cassoulet(collection, CassouletContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("prototype/quichelorraine")   => { @containers.quichelorraine(collection, QuicheLorraineContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("prototype/raclette")         => { @containers.raclette(collection, RacletteContainer(), index, dataId)(request, templateDeduping, config) }
        case Some("comment/comment-and-debate") => { @containers.commentanddebate(collection, CommentAndDebateContainer(), index, dataId)(request, templateDeduping, config) }
        case FixedContainers(containerDefinition) => { @containers.facia_cards.container(collection, ContainerLayout(containerDefinition, collection, Some(templateDeduping)), index, front.frontProperties, dataId = dataId)(request, templateDeduping, config) }
        case collectionType => {
            @DynamicContainers(collectionType, collection.items) match {
                case Some(containerDefinition) => {
                    @containers.facia_cards.container(collection, ContainerLayout(containerDefinition, collection, None), index, front.frontProperties, dataId = dataId)(request, templateDeduping, config)
                }

                case None => {
                    @containers.special(collection, SpecialContainer(), index, dataId)(request, templateDeduping, config)
                }
            }
        }
    }
}
