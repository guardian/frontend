@(trail: Trail, index: Int, containerIndex: Int, element: String = "li")(implicit request: RequestHeader, config: Config)

@defining((trail.visualTone, containerIndex == 0, containerIndex == 0 && index < 4)) { case (tone, isFirstContainer, inlineImages) =>
    <@element
        class="@GetClasses.forItem(trail, isFirstContainer)"
        data-link-name="trail | @{index + 1}">

        <div class="item__container" data-test-id="gallery-item-container">

            <a href="@LinkTo{@trail.url}" class="item__link tone-accent-border" data-link-name="gallery-container" data-is-ajax>
                <div class="item__media-wrapper item__media-wrapper--has-icon js-gallerythumbs" data-gallery-url="@LinkTo{@trail.url}" data-test-id="gallery-picture">
                    <div class="item__cta item__cta--gallery">
                        <p>Expand</p>
                        <span class="item__cta__icon">
                            <span class="i i-camera-black-large"></span>
                            <span class="i i-camera-yellow-large"></span>
                        </span>
                    </div>
                    @trail.trailPicture(5,3).map{ imageContainer =>
                        @ImgSrc.imager(imageContainer, Item620).map { imgSrc =>
                            <div class="item__image-container u-responsive-ratio js-image-upgrade @if(inlineImages){ inlined-image}" data-src="@imgSrc">
                                @if(inlineImages){
                                    @Item300.bestFor(imageContainer).map{ url => <img src="@url" class="responsive-img" alt="" /> }
                                }
                            </div>
                        }
                    }.getOrElse{
                        <div class="item__image-container u-responsive-ratio">
                            <img src="@Static("images/no-image.png")" class="responsive-img" alt="" />
                        </div>
                    }
                </div>
            </a>
            <a href="@LinkTo{@trail.url}" class="item__link item__link--no-border" data-link-name="article">
                <h@if(isFirstContainer && index == 0){1}else{2} class="item__title item__title--has-icon-mobile">
                    <span class="i i-gallery-yellow-small"></span>
                    @RemoveOuterParaHtml(trail.headline)
                </h@if(isFirstContainer && index == 0){1}else{2}>
            </a>

            @trail match { case content:model.Content => @fragments.items.elements.tagOrSection(content) }

            @trail.trailText.map { text =>
                <div class="item__standfirst">@Html(text)</div>
            }

        </div>

    </@element>
}
