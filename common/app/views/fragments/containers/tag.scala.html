@(page: model.MetaData, collection: model.Collection, style: views.support.NewsContainer, containerIndex: Int, pagination: Option[common.Pagination] = None, dataId: String)(implicit request: RequestHeader, templateDeduping: views.support.TemplateDeduping, config: com.gu.facia.client.models.CollectionConfig)

@import model.FaciaComponentName
@import views.html.fragments.keywordList
@import views.support.GetClasses
@import views.support.MostPopularTags.topTags
@import dfp.DfpAgent
@import views.support.FootballTagPage

@defining(config.displayName.orElse(collection.displayName)) { title =>

    @if(collection.items.nonEmpty) {
        <section
            class="@GetClasses.forContainer(style, config, containerIndex, false, Seq("u-cf"))"
            data-link-name="@FaciaComponentName(config, collection)"
            data-id="@dataId"
            data-type="@style.containerType"
            @DfpAgent.sponsorshipTag(config).map { keyword =>
                data-keywords="@keyword"
            }
            data-component="@FaciaComponentName(config, collection)">
            <div class="facia-container__inner">
                <div class="container__border tone-@style.tone tone-accent-border"></div>
                <div class="container__header">
                    @FootballTagPage(page).asOpt.map{ footballTagPage =>
                        @fragments.containers.elements.footballTeamHeader(footballTagPage, collection)
                    }.getOrElse{
                        @title.map { title =>
                            @fragments.containers.elements.tagMeta(None, collection.href, page.description, title, page.isContributorPage)
                        }
                    }
                    @fragments.contributor(page)
                </div>
                <div class="container__body container--rolled-up-hide">
                    @fragments.collections.tag(collection.items, style, containerIndex)
                </div>
                @pagination.map{ paginate => @fragments.pagination(page, paginate)}

                @defining(topTags(collection.items).filterNot(_.id == page.id)) { tags =>
                    @if(tags.nonEmpty) {
                        <div class="related-keywords">
                        @keywordList(tags, 5, "See also")
                        </div>
                    }
                }
            </div>
        </section>
    }
}
