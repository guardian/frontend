@(page: model.MetaData, collection: model.Collection, containerLayout: layout.ContainerLayout, pagination: Option[common.Pagination] = None, dataId: String)(implicit request: RequestHeader, config: com.gu.facia.client.models.CollectionConfig)

@import model.FaciaComponentName
@import views.html.fragments.containers.facia_cards.slice
@import views.support.GetClasses
@import dfp.DfpAgent
@import views.support.FootballTagPage

@* TODO consolidate with the master container template *@

@defining(config.displayName.orElse(collection.displayName)) { title =>
    @if(collection.items.nonEmpty) {
        <section
            class="@GetClasses.forContainer(
                config, false, title.nonEmpty, Seq("fc-container--first"), true
            )"
            data-link-name="@FaciaComponentName(config, collection)"
            data-id="@dataId"
            @DfpAgent.sponsorshipTag(config).map { keyword =>
                data-keywords="@keyword"
            }
            @DfpAgent.sponsorshipType(config).map { sponsorshipType =>
                data-sponsorship="@sponsorshipType"
            }
            data-component="@FaciaComponentName(config, collection)">
            <div class="fc-container__inner">
                <div class="fc-container__header js-container__header">
                    @FootballTagPage(page).asOpt.map{ footballTagPage =>
                        @fragments.containers.elements.footballTeamHeader(footballTagPage, collection)
                    }.getOrElse{
                        @title.map { title =>
                            @fragments.containers.elements.tagMeta(None, collection.href, page.description, title, page.isContributorPage)
                        }
                    }
                    @fragments.contributor(page)
                </div>
                <div class="fc-container__body fc-container--rolled-up-hide">
                    @for(sliceWithCards <- containerLayout.slices) {
                        @slice(sliceWithCards, 0)
                    }
                </div>
                @pagination.map{ paginate => @fragments.pagination(page, paginate)}

            </div>
            @fragments.trendingTopics(collection.items, page.id)
        </section>
    }
}
