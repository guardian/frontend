@(collection: model.Collection, containerLayout: layout.ContainerLayout, containerIndex: Int, dataId: String)(implicit request: RequestHeader, templateDeduping: views.support.TemplateDeduping, config: com.gu.facia.client.models.CollectionConfig)

@import views.support.GetClasses
@import views.html.fragments.containers.facia_cards.{show_more, slice}
@import model.FaciaComponentName
@import common.LinkTo
@import dfp.DfpAgent

@defining((config.displayName.orElse(collection.displayName), config.href.orElse(collection.href))) { case (title, href) =>
    <section id="@FaciaComponentName(config, collection)"
             class="@GetClasses.forNewStyleContainer(config, containerIndex == 0, title.nonEmpty)"
             data-link-name="@FaciaComponentName(config, collection)"
             data-id="@dataId"
             @DfpAgent.sponsorshipTag(config).map { keyword =>
                 data-keywords="@keyword"
             }
             data-component="@FaciaComponentName(config, collection)">
        <div class="facia-container__inner">
            <div class="container__header">
            @title.map { title =>
                <h2 class="container__title">
                    @href.map { href =>
                    <a class="container__title__label u-text-hyphenate" data-link-name="section heading" href="@LinkTo{/@href}">@Html(title)</a>
                    }.getOrElse{
                        <span class="container__title__label u-text-hyphenate">@Html(title)</span>
                    }
                </h2>
            }
            </div>
            <div class="container__body container--rolled-up-hide js-container--fc-show-more">
                @for(sliceWithCards <- containerLayout.slices) {
                    @slice(sliceWithCards, containerIndex)
                }

                @show_more(containerLayout.remainingCards, containerIndex)
            </div>
        </div>
    </section>
}
