@(metaData: model.MetaData)(implicit request: RequestHeader)
@import common._

@defining(Edition(request).navigation) { navigation =>
    <div class="@RenderClasses(Map(
                    ("new-navigation", true),
                    ("new-navigation--collapsed", true),
                    ("new-navigation--has-local-navigation", Navigation.localLinks(navigation, metaData).nonEmpty)
                ))">
        <div class="gs-container">
            <div class="new-navigation__inner">
                <div class="new-navigation__scroll">
                    <nav class="new-navigation__container new-navigation__container--first" aria-label="Current section">
                        @if(!Edition.isEditionFront){
                            @fragments.nav.signposting(metaData, navigation)

                            @Navigation.topLevelItem(navigation, metaData).map{ topSection =>
                                @if(Navigation.localLinks(navigation, metaData).nonEmpty) {
                                    <ul class="local-navigation">
                                        @Navigation.rotatedLocalNav(topSection, metaData).map{ link =>
                                            <li class="local-navigation__item"><a class="local-navigation__action" href="@LinkTo(link.href)" data-link-name="@link.title">@Html(link.title)</a></li>
                                        }
                                    </ul>
                                }
                            }
                        }
                    </nav>
                    <nav class="new-navigation__container new-navigation__container--second" aria-label="Guardian sections">
                        <ul class="top-navigation">
                            @navigation.map{ nav =>
                                @if(!Navigation.isEditionFront(nav)){
                                    <li class="@RenderClasses(Map(
                                            ("top-navigation__item", true),
                                            ("top-navigation__item--current", nav.currentFor(metaData))
                                        ))">
                                        <a class="top-navigation__action" href="@LinkTo(nav.name.href)" data-link-name="@nav.name.title">
                                            @Html(nav.name.title)
                                            @if(nav.currentFor(metaData)){
                                                <span class="u-h">selected</span>
                                            }
                                        </a>
                                    </li>
                                }
                            }
                        </ul>
                    </nav>
                </div>
                <a class="new-navigation__toggle js-new-navigation-toggle" href="#footer-nav">
                    <i class="new-navigation__toggle-burger honest-burger"><i></i><i></i><i></i></i>
                    <span class="new-navigation__toggle-label new-navigation__toggle-label--open">all<span class="new-navigation__toggle-label__extra"> sections</span></span>
                    <span class="new-navigation__toggle-label new-navigation__toggle-label--close">close</span>
                </a>
            </div>
            <div class="new-navigation__expandable">
                <div class="js-mega-nav-placeholder"></div>
            </div>
        </div>
    </div>
}
