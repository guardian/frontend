@(trails: Seq[Trail])(implicit request: RequestHeader)

@defining(trails.take(3)) { trails =>
    <ul class="unstyled items item-count-@trails.size">
        @trails.zipWithIndex.map{ case (trail, index) =>
            <li class="item @trail.trailType.map("item--" + _) @trail.mainPicture(620).map{image => item--with-image}.getOrElse{item--without-image}" data-link-name="trail | @{index + 1}"
                @trail.discussionId.map{ id => data-discussion-id="@id" }>
                <h2 class="item__title">
                    <a href="@LinkTo{@trail.url}" class="item__link">
                        @RemoveOuterParaHtml(trail.headline)
                    </a>
                </h2>
                <div class="item__meta item__meta--grey">
                    <time class="item__timestamp js-item__timestamp"
                          itemprop="datePublished"
                          datetime="@trail.webPublicationDate.toString("yyyy-MM-dd'T'HH:mm:ssZ")"
                          data-timestamp="@trail.webPublicationDate.getMillis">
                        <i class="i"></i>
                        <span class="timestamp__text"><span class="u-h">Published: </span>@Format(trail.webPublicationDate, "d MMM y")</span>
                    </time>
                </div>
                @trail.mainPicture(620).map{ mainPicture =>
                    <div class="item__image-container">
                        <a href="@LinkTo{@trail.url}" class="item__link">
                            <img class="item__image" src="@mainPicture.path" alt="" />
                        </a>
                    </div>
                }
            </li>
        }
    </ul>
}
