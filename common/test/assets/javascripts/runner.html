<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

  <title id="foo">Jasmine Spec Runner</title>
    
  <link rel="shortcut icon" type="image/png" href="vendor/jasmine-1.2.0/jasmine_favicon.png">
  <link rel="stylesheet" type="text/css" href="vendor/jasmine-1.2.0/jasmine.css">
  <script type="text/javascript" src="vendor/jasmine-1.2.0/jasmine.js"></script>
  <script type="text/javascript" src="vendor/jasmine-1.2.0/jasmine-html.js"></script>
  <script type="text/javascript" src="../../../app/assets/javascripts/vendor/require-2.0.4.js"></script>
  <script>
      require.config({
        baseUrl: "../../../app/assets/javascripts/",
        paths: {
                common:  'common',
                bonzo:   'vendor/bonzo',
                qwery:   'vendor/qwery',
                bean:    'vendor/bean-0.4.11-1',
                reqwest: 'vendor/reqwest',
                analytics: 'modules/analytics',
                omniture: '../../public/javascripts/vendor/omniture'
                //omniture: '../../../test/assets/javascripts/fixtures/stubOmniture'
            }
      });
  </script>
  
  <script type="text/javascript" src="vendor/sinon-1.3.4/sinon.js"></script>
  <script type="text/javascript" src="vendor/sinon-1.3.4/jasmine-sinon.js"></script>
  <script type="text/javascript">

    window.onhashchange = function(){
      window.location.reload();
    }

    var spec = location.hash.replace('#', '');

    if (spec) {

        document.getElementById("foo").innerHTML = 'Jasmine Spec Runner - ' + spec; 

        // jasmine boilerplate
        (function() {
          var jasmineEnv = jasmine.getEnv();
          jasmineEnv.updateInterval = 1000;

          var htmlReporter = new jasmine.HtmlReporter();

          jasmineEnv.addReporter(htmlReporter);

          jasmineEnv.specFilter = function(spec) {
            return htmlReporter.specFilter(spec);
          };

          var currentWindowOnload = window.onload;

          // require the spec's
          require(['../../../test/assets/javascripts/spec/' + spec + '.spec'], function(spec) {
              jasmineEnv.execute();
            });

          })();
    }

  </script>
  <style>
      #test-cases div { display: none;}}
  </style>
</head>

<body>

    <ul>
        <li><a href="#Common">Common</a>
        <li><a href="#Detect">Detect</a>
        <li><a href="#Popular">Popular</a>
        <li><a href="#Images">Image</a>
        <li><a href="#Related">Related</a>
        <li><a href="#Analytics">Analytics</a>
        <li><a href="#Expandable">Expandable</a>
        <li><a href="#RelativeDates">Relative Dates</a></li>
    </ul>

    <div id="test-cases">
        
        <!-- UpgradeImages.spec -->
        <img data-fullsrc="http://placekitten.com/1/1" data-width="5" width="10" id="upgradeImages" class="visible" />

        <!-- Related.spec -->
        <div id="related-1"></div>
        <div id="related-2"></div>

        <!-- Popular.spec -->
        <div id="popular-1"></div>

        <!-- Expandables -->
        <style>
            ul.flex {
                transition: background-color 0.5s linear;
                -moz-transition: background-color 0.5s linear;
                -o-transition: background-color 0.5s linear;
                -webkit-transition: background-color 0.5s linear; 
            }
            .shut ul.flex { background-color: #999; } /* illustrative */
            ul.flex { background-color: #ccc; }
        </style>

        <!-- trail -->
        <div id="trail-a" data-count="5">
            <ul>
                <li class="t1">one</li>
                <li class="t2">two</li>
            </ul>
            <ul class="flex">
                <li class="t3">three</li>
                <li class="t4">four</li>
                <li class="t5">five</li>
            </ul>
        </div>

        <div id="trail-b" data-count="3">
            <ul>
                <li class="t1">one</li>
                <li class="t1">two</li>
            </ul>
            <ul class="flex">
                <li class="t2">three</li>
            </ul>
        </div>

        <div id="trail-c" data-count="3" class="shut">
        </div>

        <div id="trail-d" data-count="1" class="shut">
        </div>

        <div id="trail-e" data-count="3">
            <ul>
                <li class="t1">one</li>
                <li class="t2">two</li>
            </ul>
            <ul class="flex">
                <li class="t3">three</li>
            </ul>
        </div>

        <!-- -->
        <div id="trail-f" data-count="-1">
        </div>

        <div id="trail-g" data-count="2">
        </div>

        <!-- RelativeDates.spec -->
        <div id="relative-dates">
          <p><strong>Test dates</strong> (should be replaced with timestamps)</p>
          <ul>
            <li id="relative-date-test-item" class="js-timestamp" data-timestamp="1334339016">Friday 13th Apr. 2012, 6.43pm</li>
            <li class="js-timestamp" data-timestamp="1344859200">Monday 13th Aug. 2012, 12pm</li>
            <li id="relative-date-invalid-item" class="js-timestamp" data-timestamp="last tuesday">(deliberate invalid timestamp)</li>
          </ul>
        </div>
    </div>

<!-- just some test markup for click events -->
<div data-link-name="outer div" style="display: none">
    <p id="not-inside-a-link">
        <a href="/foo" id="click-me" data-link-name="the link">The link</a>
        <a href="/foo" id="click-me-quick" data-is-ajax="true" data-link-name="the link">The link</a>
    </p>
</div>

</body>
</html>
