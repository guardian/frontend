@(matchNav: controllers.MatchNav, comp: model.Competition)
@import implicits.Football._

@defining(matchNav.theMatch){fMatch =>
<div class="m-sport">
    <style>
        #content > .six-col {
            float: none;
        }

        .m-sport {
            border-bottom: 1px solid #008000;
        }

        .m-sport #tabs {
            border-bottom: 1px solid #999;
        }

        .m-sport h2 {
            margin-top: 0;
            border-top: 0;
            font-size: 14px !important;
            padding: 9px 0 12px 0 !important;
        }

        .m-sport th {
            padding-right: 30px;
            text-align: left;
            vertical-align: top;
            width: 150px;
        }

        .m-sport li {
            display: inline;
            color: #666;
        }

            /* delete after r2 refactoring and the importants too */
        .football .article-attributes
        {
            border-top: none !important;
        }
    </style>

  @if(matchNav.hasReports){
    <div id="tabs" >
        <ol class="tabs fake" >
            @matchNav.matchReport.map{ matchReport => @report(matchReport, "Guardian report") }
            @matchNav.minByMin.map{ minByMin => @report(minByMin, "Min-by-min") }
            @report(matchNav.stats, "Match facts")
        </ol>
    </div>
  }

    <div id="match-stats-summary" data="@fMatch.id" >
        <h2 data="@comp.id">@comp.fullName</h2>
        <table>
            <tbody>
            <tr>
                <th data="@fMatch.homeTeam.id" >@(fMatch.homeTeam.name) @{fMatch.homeTeam.score getOrElse 0}</th>
                <td>
                    @scorers(fMatch.homeTeam.scorers)
                </td>
            </tr>
            <tr class="away">
                <th data="@fMatch.awayTeam.id">@(fMatch.awayTeam.name) @{fMatch.awayTeam.score getOrElse 0}</th>
                <td>
                    @scorers(fMatch.awayTeam.scorers)
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
}

@report(trail: Trail, text: String) = {
  @if(matchNav.currentPage.exists(_.url == trail.url)){
    <li><a class="active" href="#">@text</a></li>
  } else {
    <li><a class="inactive" href="@trail.url">@text</a></li>
  }
}

@scorers(scorers: Option[String]) = {
  <ul>
    @{
      scorers.map { scors : String =>
        val all = scors.split(",")
        all map { s =>
          val noBrace = s.replace("(", " ").replace(")", "")
          val scorer = if (s == all.last) noBrace else noBrace + ", "
          <li>{scorer}</li>
        }
      }
    }
  </ul>
}