@(model: MatchesPage)

@model.days.map{ day =>
	<h2 class="competitions-date type-4">@day.date.toString("EEEE d MMMM yyyy")</h2>
	<ol class="competitions unstyled" data-link-name="matches">
        @day.competitions.zipWithRowInfo.map{ case (comp, row) =>
        	<li class="competition" data-link-name="competition | @comp.fullName">
	            <a class="competition-title football-table-link type-3" href="@comp.url" data-link-name="view competition">
	                @comp.fullName
	                <i class="i-filter-arrow-right"></i>
	            </a>
	            
	            <ol class="matches unstyled">
	                @* sort matches by start time, then alphabet *@
	                @comp.matches.sortBy(m => (m.date.minuteOfDay().get(), m.homeTeam.name)).map{
	                    case fixture: pa.Fixture                        => { @fragments.fixture(fixture) }
	                    case result: pa.Result                          => { @fragments.result(result) }
	                    case matchDay: pa.MatchDay if matchDay.result   => { @fragments.result(matchDay) }
	                    case matchDay: pa.MatchDay                      => { @fragments.liveMatch(matchDay) }
	                }
	            </ol>
	            @* Shows the live blog (if there is one) after the first competition *@
	            @if(row.isFirst){
	                @model.blog.map{ blog =>
	                    <div class="trailblock trail">@fragments.trails.thumbnail(blog, row.rowNum)</div>
	                }
	            }
       		</li>
        }
	</ol>
}

@if(!model.days) {
	<p>There are no matches being played today. Why not check out upcoming <a href="/football/fixtures">fixtures</a> or previous <a href="/football/results">results</a>?</p>
}

