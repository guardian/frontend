<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="charset" content="utf-8" />
    <title>Guardian Colours</title>
    <link href="demo.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <h1>Colours</h1>

    <div class="b-guardian-brand"></div>
    <div class="b-guardian-brand-light"></div>
    <div class="b-guardian-brand-dark"></div>

    <div class="clear"></div>

    <div class="b-error"></div>
    <div class="b-success"></div>

    <div class="clear"></div>

    <div class="b-neutral-1"></div>
    <div class="b-neutral-2"></div>
    <div class="b-neutral-3"></div>
    <div class="b-neutral-4"></div>
    <div class="b-neutral-5"></div>
    <div class="b-neutral-6"></div>
    <div class="b-neutral-7"></div>
    <div class="b-neutral-8"></div>

    <div class="clear"></div>

    <div class="b-news-main-1"></div>
    <div class="b-news-main-2"></div>
    <div class="b-news-support-1"></div>
    <div class="b-news-support-2"></div>
    <div class="b-news-support-3"></div>
    <div class="b-news-support-4"></div>
    <div class="b-news-support-5"></div>
    <div class="b-news-support-6"></div>
    <div class="b-news-support-7"></div>

    <div class="clear"></div>

    <div class="b-features-main-1"></div>
    <div class="b-features-main-2"></div>
    <div class="b-features-support-1"></div>
    <div class="b-features-support-2"></div>
    <div class="b-features-support-3"></div>
    <div class="b-features-support-4"></div>

    <div class="clear"></div>

    <div class="b-comment-main-1"></div>
    <div class="b-comment-main-2"></div>
    <div class="b-comment-support-1"></div>
    <div class="b-comment-support-2"></div>
    <div class="b-comment-support-3"></div>
    <div class="b-comment-support-4"></div>

    <div class="clear"></div>

    <div class="b-multimedia-main-1"></div>
    <div class="b-multimedia-main-2"></div>
    <div class="b-multimedia-support-1"></div>
    <div class="b-multimedia-support-2"></div>
    <div class="b-multimedia-support-3"></div>
    <div class="b-multimedia-support-4"></div>

    <div class="clear"></div>

    <div class="b-live-main-1"></div>
    <div class="b-live-main-2"></div>
    <div class="b-live-support-1"></div>
    <div class="b-live-support-2"></div>
    <div class="b-live-support-3"></div>

    <div class="clear"></div>

    <div class="b-maps-main-1"></div>
    <div class="b-maps-main-2"></div>
    <div class="b-maps-support-1"></div>
    <div class="b-maps-support-2"></div>
    <div class="b-maps-support-3"></div>
    <div class="b-maps-support-4"></div>

    <div class="clear"></div>

    <div class="b-external-main-1"></div>
    <div class="b-external-support-1"></div>

    <p><a href="https://github.com/guardian/pasteup-palette">Pasteup Palette GitHub Project</a></p>

    <script>
        // Enable iteration through querySelectorAll
        // https://gist.github.com/DavidBruant/1016007
        NodeList.prototype.forEach = Array.prototype.forEach;
        HTMLCollection.prototype.forEach = Array.prototype.forEach; // Because of https://bugzilla.mozilla.org/show_bug.cgi?id=14869

        (function() {
            function componentToHex(c) {
                var hex = c.toString(16);
                return hex.length == 1 ? "0" + hex : hex;
            }

            function rgbToHex(r, g, b) {
                return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
            }

            document.querySelectorAll('[class^="b-"]').forEach(function (colour) {
                var colourName  = window.getComputedStyle(colour, ':before').getPropertyValue('content');
                 // Firefox returns a quoted string. We only need the text
                colourName = colourName.replace(/"/g, '');

                var colourValueRGB = getComputedStyle(colour).backgroundColor.match(/\d+/g);
                var r = parseInt(colourValueRGB[0]).toString(16);
                var g = parseInt(colourValueRGB[1]).toString(16);
                var b = parseInt(colourValueRGB[2]).toString(16);
                var hexColourValue = rgbToHex(r, g, b);

                colour.innerHTML = '<span class="colour-name">' + colourName + '</span>'
                                 + '<span class="colour-value">' + hexColourValue + '</span>';
            })
        })();
    </script>
</body>
</html>
