/**
 * DO NOT EDIT THIS FILE
 *
 * It is not used to to build anything.
 *
 * It's just a record of the old flow types.
 *
 * Use it as a guide when converting
 * - static/src/javascripts/projects/common/modules/commercial/epic/optimize-epic-utils.js
 * to .ts, then delete it.
 */

// @flow

import config from 'lib/config';

import { reportEpicError } from 'common/modules/commercial/epic/epic-utils';
import { displayIframeEpic } from 'common/modules/commercial/epic/iframe-epic-utils';

import type { IframeEpicComponent } from 'common/modules/commercial/epic/iframe-epic-utils';

const displayOptimizeEpic = (): Promise<IframeEpicComponent> => {
    const url = config.get('page.optimizeEpicUrl');
    if (url) {
        // TODO: allow fallback ab test to be set via function argument?
        return displayIframeEpic(url);
    }
    const urlError = new Error('config page.optimizeEpicUrl not found');
    reportEpicError(urlError);
    return Promise.reject(urlError);
};

export { displayOptimizeEpic };
