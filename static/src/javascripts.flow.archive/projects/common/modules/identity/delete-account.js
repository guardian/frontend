/**
 * DO NOT EDIT THIS FILE
 *
 * It is not used to to build anything.
 *
 * It's just a record of the old flow types.
 *
 * Use it as a guide when converting
 * - static/src/javascripts/projects/common/modules/identity/delete-account.js
 * to .ts, then delete it.
 */

// @flow
import $ from 'lib/$';
import bean from 'bean';
import fastdom from 'fastdom';

const deleteButtonElm = $('#deleteButton')[0];
const deleteFormElm = $('#deleteForm')[0];
const deleteLoaderElm = $('#deleteLoader')[0];

const disableDeleteButton = (): void => {
    if (deleteButtonElm) {
        fastdom.mutate(() => {
            deleteButtonElm.disabled = true;
        });
    }
};

const showLoader = (): void => {
    if (deleteLoaderElm) {
        fastdom.mutate(() => {
            deleteLoaderElm.classList.remove('is-hidden');
        });
    }
};

const setupLoadingAnimation = (): void => {
    if (deleteFormElm && deleteLoaderElm) {
        bean.on(deleteFormElm, 'submit', () => {
            disableDeleteButton();
            showLoader();
        });
    }
};

export { setupLoadingAnimation };
