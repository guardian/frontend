/**
 * DO NOT EDIT THIS FILE
 *
 * It is not used to to build anything.
 *
 * It's just a record of the old flow types.
 *
 * Use it as a guide when converting
 * - static/src/javascripts/projects/common/modules/identity/modules/fetchFormFields.js
 * to .ts, then delete it.
 */

// @flow
import fastdom from 'lib/fastdom-promise';

export const getCsrfTokenFromElement = (
    originalEl: ?HTMLElement
): Promise<string> =>
    fastdom
        .measure(() => {
            if (!originalEl) return Promise.reject();
            const closestFormEl: ?Element = originalEl.closest('form');
            if (closestFormEl) {
                return closestFormEl.querySelector('[name=csrfToken]');
            }

            return Promise.reject();
        })
        .then((csrfTokenEl: HTMLInputElement) => csrfTokenEl.value.toString());
