/**
 * DO NOT EDIT THIS FILE
 *
 * It is not used to to build anything.
 *
 * It's just a record of the old flow types.
 *
 * Use it as a guide when converting
 * - static/src/javascripts/projects/common/modules/identity/follow.js
 * to .ts, then delete it.
 */

// @flow
import React, { render } from 'preact-compat';
import fastdom from 'lib/fastdom-promise';
import { FollowButtonWrap } from './upsell/button/FollowButtonWrap';
import loadEnhancers from './modules/loadEnhancers';

const bindFollow = (el): void => {
    fastdom
        .measure(() => el.querySelector('.identity-follow__button-target'))
        .then((wrapperEl: HTMLElement) => {
            fastdom.mutate(() => {
                render(
                    <FollowButtonWrap
                        following
                        onFollow={() => {
                            console.log('following');
                        }}
                        onUnfollow={() => {
                            console.log('not following');
                        }}
                    />,
                    wrapperEl
                );
            });
        });
};

const enhanceFollow = (): void => {
    loadEnhancers([['.identity-follow', bindFollow]]);
};

export { enhanceFollow };
