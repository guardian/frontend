/**
 * DO NOT EDIT THIS FILE
 *
 * It is not used to to build anything.
 *
 * It's just a record of the old flow types.
 *
 * Use it as a guide when converting
 * - static/src/javascripts/projects/commercial/modules/measure-timing.js
 * to .ts, then delete it.
 */

// @flow

export const measureTiming = (name: string) => {
    type TimeTakenInMilliseconds = number | null;
    if (window.performance && window.performance.now) {
        const perf = window.performance;
        const startKey = `${name}-start`;
        const endKey = `${name}-end`;

        const start = () => {
            perf.mark(startKey);
        };

        const end = (): TimeTakenInMilliseconds => {
            perf.mark(endKey);
            perf.measure(name, startKey, endKey);

            const measureEntries = perf.getEntriesByName(name, "measure");
            const timeTakenFloat = measureEntries[0].duration;
            const timeTakenInt = Math.round(timeTakenFloat);

            return timeTakenInt;
        };

        const clear = () => {
            perf.clearMarks(startKey)
        }

        return {
            start,
            end,
            clear
        };
    }
    return { start: () => null, end: (): TimeTakenInMilliseconds => null, clear: () => null }
};
