@(stories: Seq[Story], edition: String)

@renderTrail(content: Seq[model.Content], edition: String) = {
    @content.map{
        case a: Article => {
            <article id="article" class="article @if(a.isLive){is-live}">
                <header class="article-head">
                    @fragments.dateline(a.webPublicationDate, a.isLive, edition)
                    <h2 class="article-headline">Latest developments</h2>
                </header>

                @if(!a.isLive) {
                    @a.mainPicture.map{ mainPicture =>
                        @a.mainPicture(width=220).map{ smallCrop =>
                            @fragments.img(mainPicture, smallCrop)
                        }
                    }
                }

                @fragments.byline(a.byline, a)
            </article>
        }
    }
}

<ul class="unstyled box-indent">
    @stories.take(2).zipWithRowInfo.map{ case (story, info) =>
        <p>@story.title</p>
        @if(story.contentByColour.get("Overview").nonEmpty) {
            @story.contentByColour.get("Overview").map{ content =>
                @defining(content.sortBy(_.webPublicationDate.getMillis).reverse.sortBy(_.importance).take(1)){ article =>
                    @renderTrail(article, edition)
                }
            }
        } else {
            @renderTrail(story.contentByImportance.take(1), edition)
        }
    }
</ul>
