@(story: Story)

<!-- all the photos we have on this subject from the latest chapter -->

@gallery(g: model.Gallery) = {

        @g.images.zipWithRowInfo.map{ case(image, info) =>
            <figure class="js-swipe__item story-picture">
                <img class="js-swipe__img story-picture__img" src="@image.url" />
                @image.caption.map { caption =>
                    <figcaption class="js-swipe__text story-picture__caption">@StripHtmlTags(caption)</figcaption>
                }
            </figure>
        }
}



@if(story.hasEvents) {
    @story.events.take(1).map { event =>
        @if(event.hasContent) {
            <section class="story-pictures h" data-link-name="Pictures">
                <h2 class="story-title story-title--section story-title--white">
                    @story.labels.getOrElse("pictures", "In pictures")
                </h2>

                <div class="js-swipe">
                    <div class="js-swipe__items">
                        <div class="js-swipe__wrap">
                            @event.content.map{
                                case g: Gallery => { @gallery(g) }
                                case _ => {}
                            }
                        </div>
                    </div>

                    <div class="js-swipe__controls cta-new cta-new--dark h">
                        <button class="cta-new__btn cta-new__btn--left" data-link-name="Prev">
                            <i class="i i-arrow-white-down cta-new__icn"></i>
                        </button>
                        <span class="cta-new__text cta-new__text--center"></span>
                        <button class="cta-new__btn cta-new__btn--right" data-link-name="Next">
                            <i class="i i-arrow-white-down cta-new__icn--right"></i>
                        </button>
                    </div>
                </div>
            </section>
        }
    }
}
